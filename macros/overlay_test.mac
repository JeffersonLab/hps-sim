#
# Event overlay macro similar to tritrig-wab-beam generation
#

# load detector
/lcdd/url detector.lcdd

# print info as event generation runs
/hps/generators/verbose 2 

# overlay trident signal every 250 events
/hps/generators/create TriGen LHE
/hps/generators/TriGen/file tritrig_unweighted_events.lhe
/hps/generators/TriGen/sample period 250
/hps/generators/TriGen/verbose 2

# overlay WAB events using poisson distribution (copied value generated by hps-mc)
/hps/generators/create WabGen LHE
/hps/generators/WabGen/file wab_unweighted_events.lhe
/hps/generators/WabGen/sample poisson 0.00890984782305
/hps/generators/WabGen/verbose 2

# generate beam backgrounds
/hps/generators/create BeamGen BEAM
/hps/generators/BeamGen/verbose 2

# plugin for selecting tracks from beam-target interaction
/hps/plugins/load BeamTrackSelectionPlugin
/hps/plugins/BeamTrackSelectionPlugin/verbose 2

# init the run
/run/initialize

# LCIO output
/hps/lcio/verbose 2
/hps/lcio/recreate
/hps/lcio/file overlay_test.slcio

# number of events
/run/beamOn 1000
